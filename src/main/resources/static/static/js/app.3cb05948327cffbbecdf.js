webpackJsonp([1],{"/7gv":function(t,e){},"/PM/":function(t,e){},"2SFc":function(t,e,a){t.exports=a.p+"static/img/step2.4d8128a.png"},"6Jvj":function(t,e){},Cf2i:function(t,e){},EYnv:function(t,e){},Fr5I:function(t,e){},FsJg:function(t,e,a){var n={"./cat":"MGUO","./cat.js":"MGUO","./cd":"OkV7","./cd.js":"OkV7","./chmod":"thPH","./chmod.js":"thPH","./common":"8y2q","./common.js":"8y2q","./cp":"kEp2","./cp.js":"kEp2","./dirs":"lK6y","./dirs.js":"lK6y","./echo":"IRJ8","./echo.js":"IRJ8","./error":"HxTw","./error.js":"HxTw","./exec":"VQ1x","./exec.js":"VQ1x","./find":"r+ID","./find.js":"r+ID","./grep":"T3mR","./grep.js":"T3mR","./head":"jMmx","./head.js":"jMmx","./ln":"4Bxg","./ln.js":"4Bxg","./ls":"MULN","./ls.js":"MULN","./mkdir":"3ORl","./mkdir.js":"3ORl","./mv":"PcVt","./mv.js":"PcVt","./popd":"h3Dv","./popd.js":"h3Dv","./pushd":"PGBa","./pushd.js":"PGBa","./pwd":"+UCj","./pwd.js":"+UCj","./rm":"EaF0","./rm.js":"EaF0","./sed":"/j+X","./sed.js":"/j+X","./set":"c0cj","./set.js":"c0cj","./sort":"yc2b","./sort.js":"yc2b","./tail":"i//j","./tail.js":"i//j","./tempdir":"RvNk","./tempdir.js":"RvNk","./test":"U9dR","./test.js":"U9dR","./to":"xlaY","./to.js":"xlaY","./toEnd":"Lk2e","./toEnd.js":"Lk2e","./touch":"0Qa2","./touch.js":"0Qa2","./uniq":"lTxy","./uniq.js":"lTxy","./which":"GiAy","./which.js":"GiAy"};function o(t){return a(i(t))}function i(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}o.keys=function(){return Object.keys(n)},o.resolve=i,t.exports=o,o.id="FsJg"},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},o,!1,function(t){a("QyuO")},null,null).exports,s=a("/ocq"),r=a("//Fk"),l=a.n(r),c=a("mtWM"),u=a("zL8q"),d=a.n(u),m="http://txzmap.com:8081/splice",h=c.a.create({baseURL:m,timeout:5e3});function p(t){return h({url:"/user/splice",method:"POST",data:t})}h.interceptors.request.use(function(t){var e=localStorage.getItem("jwt");return e&&(t.headers.Authorization=""+e),t},function(t){return l.a.reject(t)}),h.interceptors.response.use(function(t){var e=t.status;return 200===e||0===e?t.data:l.a.reject(t.data.info||"è¯·æ±‚å¤±è´¥")},function(t){return t.response?t.response.status:t.request?u.Message.error({message:"è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥æˆ–ç¨åå†è¯•ï¼",duration:3e3}):console.error("è¯·æ±‚é…ç½®é”™è¯¯",t.message),l.a.reject(t)});var v={name:"Login",data:function(){return{title:"é«˜æ¸…åœ°å›¾æ‹¼æ¥ç³»ç»Ÿ",msg:"jayhuang",footer:"powered by txzmap.com<br> from 2024-11-13",loginButtonText:"ç™»&emsp;é™†",isLoading:!1,form:{userName:"",password:""}}},methods:{onSubmit:function(){var t,e=this;this.isLoading=!0,(t=this.form,h({url:"/user/login",method:"POST",data:t})).then(function(t){if(1===t.resultCode){var a=t.result;e.$store.commit("setUser",a);var n="ç™»é™†æˆåŠŸ";e.$store.getters.vipIsAvailable&&(n="æ¬¢è¿å›æ¥ï¼Œå°Šæ•¬çš„vipç”¨æˆ·"),e.$message.success(n),e.$router.push("/map")}else e.$message.error("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");e.isLoading=!1}).catch(function(t){e.isLoading=!1})},goToRegist:function(){this.$router.push("/regist")}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"form",staticClass:"login-form",attrs:{model:t.form,"label-width":"80px"}},[a("div",{staticClass:"title-container"},[a("span",[t._v(t._s(t.title))])]),t._v(" "),a("el-form-item",{attrs:{label:"ç”¨æˆ·å"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"å¯†ç "}},[a("el-input",{attrs:{type:"password",clearable:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("div",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"normal",loading:t.isLoading},domProps:{innerHTML:t._s(t.loginButtonText)},on:{click:t.onSubmit}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"text"},on:{click:t.goToRegist}},[t._v("æ³¨å†Œç”¨æˆ·")])],1),t._v(" "),a("div",{staticClass:"footer"},[a("span",{domProps:{innerHTML:t._s(t.footer)}})])],1)],1)},staticRenderFns:[]};var f=a("VU/8")(v,g,!1,function(t){a("Fr5I")},"data-v-3e40a6ad",null).exports,_={name:"Login",data:function(){return{title:"è´¦å·æ³¨å†Œ",msg:"jayhuang",loading:!1,footer:"ç”µå­é‚®ç®±å³ä¸ºæ‚¨çš„ç™»é™†è´¦å·ï¼Œè¯·ç‰¢è®°ï¼Œå¦‚é—å¿˜å¯†ç è¯·è”ç³»ç®¡ç†å‘˜è¿›è¡Œé‡ç½®",registForm:{userName:"",password:"",passwordAgain:""}}},methods:{regist:function(){var t,e=this;this.registForm.password===this.registForm.passwordAgain?this.registForm.password.length<8?this.$message.error("å¯†ç é•¿åº¦å¿…é¡»å¤§äº8ä½"):(this.loading=!0,(t=this.registForm,h({url:"/user/register",method:"POST",data:t})).then(function(t){e.loading=!1,1===t.resultCode?e.$confirm("æ³¨å†ŒæˆåŠŸ,æ˜¯å¦è½¬åˆ°ç™»é™†","ç¡®å®š",{type:"success"}).then(function(){e.goLogin()}):e.$message.error(t.info)}).catch(function(t){e.loading=!1})):this.$message.error("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´")},goLogin:function(){this.$router.push("/login")}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"form",staticClass:"login-form",attrs:{model:t.registForm,"label-width":"80px"}},[a("div",{staticClass:"title-container"},[a("span",[t._v(t._s(t.title))])]),t._v(" "),a("el-form-item",{attrs:{label:"ç”µå­é‚®ç®±"}},[a("el-input",{model:{value:t.registForm.userName,callback:function(e){t.$set(t.registForm,"userName",e)},expression:"registForm.userName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"å¯†ç "}},[a("el-input",{attrs:{type:"password"},model:{value:t.registForm.password,callback:function(e){t.$set(t.registForm,"password",e)},expression:"registForm.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"ç¡®è®¤å¯†ç "}},[a("el-input",{attrs:{type:"password"},model:{value:t.registForm.passwordAgain,callback:function(e){t.$set(t.registForm,"passwordAgain",e)},expression:"registForm.passwordAgain"}})],1),t._v(" "),a("div",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"normal",loading:t.loading},on:{click:t.regist}},[t._v("æ³¨å†Œ")])],1),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"text"},on:{click:t.goLogin}},[t._v("è¿”å›ç™»é™†é¡µé¢")])],1),t._v(" "),a("div",{staticClass:"footer"},[a("span",{domProps:{innerHTML:t._s(t.footer)}})])],1)],1)},staticRenderFns:[]};var y=a("VU/8")(_,w,!1,function(t){a("/PM/")},"data-v-26dd8a4f",null).exports,b=a("d7EF"),x=a.n(b),S=a("pFYg"),C=a.n(S),k=a("nvAS"),T=!0;function M(t){var e=t.getLatLngs()[0],a=L.latLng(e[0]),n=L.latLng(e[1]),o=L.latLng(e[2]);return[a.distanceTo(n),a.distanceTo(o)]}function D(t){if(!(t&&"object"===(void 0===t?"undefined":C()(t))&&"lat"in t&&"lng"in t))return!1;var e=t.lat,a=t.lng;return"number"==typeof e&&"number"==typeof a&&(!(e<-90||e>90)&&!(a<-180||a>180))}function $(t){if(!(t&&"object"===(void 0===t?"undefined":C()(t))&&"lat"in t&&"lng"in t))return!1;var e=t.lat,a=t.lng;if(!(e&&"object"===(void 0===e?"undefined":C()(e))&&"d"in e&&"m"in e&&"s"in e))return!1;if(!(a&&"object"===(void 0===a?"undefined":C()(a))&&"d"in a&&"m"in a&&"s"in a))return!1;var n=e.d,o=e.m,i=e.s,s=a.d,r=a.m,l=a.s;return"number"==typeof n&&"number"==typeof o&&"number"==typeof i&&"number"==typeof s&&"number"==typeof r&&"number"==typeof l&&(!(n<-90||n>90||s<-180||s>180)&&(!(o<0||o>59||r<0||r>59)&&!(i<0||i>59||l<0||l>59)))}function I(t,e){return"6"===e?6*t-3:"3"===e?3*t:void 0}function P(t,e){return[function(t,e){return Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,e))}(t.lat,e),function(t,e){return Math.floor((t+180)/360*Math.pow(2,e))}(t.lng,e)]}var j={formatArea:function(t){var e=function(t){var e=M(t);return e[0]*e[1]}(t);return e>1e4?Math.round(e/1e6*100)/100+" km<sup>2</sup>":Math.round(100*e)/100+" m<sup>2</sup>"},formatLength:function(t){return t>100?Math.round(t/1e3*100)/100+"  km":Math.round(100*t)/100+" m"},getWidthAndHigh:M,changeLatlngFormat:function(){T=!T},formatLatlng:function(t){return t?T?function(t){var e=t.lat,a=t.lng;function n(t){var e=Math.abs(t),a=Math.floor(e),n=60*(e-a),o=60*(n-Math.floor(n));return a+"Â° "+Math.floor(n)+"' "+o.toFixed(1)+'"'}return(e>=0?" N":" S")+n(e)+","+(a>=0?" E":" W")+n(a)}(t):function(t){var e=t.lat,a=t.lng,n=t.lat.toFixed(6),o=t.lng.toFixed(6);return(e>=0?" N":" S")+n+","+(a>=0?" E":" W")+o}(t):""},isLatLngValid:D,isLatLngDMSValid:$,convertLatLngDMStoLatLng:function(t){return $(t)?{lat:t.lat.d+t.lat.m/60+t.lat.s/3600,lng:t.lng.d+t.lng.m/60+t.lng.s/3600}:null},convertCGCS2000GaussToWGS84:function(t,e){var a=t.y.toString(),n=parseInt(a.slice(0,2)),o=parseInt(a.substring(2)),i="+proj=tmerc +lat_0=0 +lon_0="+I(n,e)+" +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs",s=Object(k.a)(i,"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",[o,t.x]);return{lat:s[1],lng:s[0]}},WGS84ToCGCS2000:function(t,e){if(!D(t))throw new Error("Invalid WGS84 coordinates");var a=t.lng,n="6"===e?Math.floor((a+6)/6):Math.floor(a/3),o="+proj=tmerc +lat_0=0 +lon_0="+I(n,e)+" +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs",i=Object(k.a)("+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",o,[t.lng,t.lat]),s=x()(i,2),r=s[0],l=s[1];return{x:Math.round(r),y:Math.round(l)}},isXYValid:function(t){if(!(t&&"object"===(void 0===t?"undefined":C()(t))&&"x"in t&&"y"in t))return!1;var e=t.x,a=t.y;return"number"==typeof e&&"number"==typeof a&&7===e.toString().length&&8===a.toString().length},calculatelon0:I,calcTotalTileSize:function(t,e,a){var n=P(t,a),o=P(e,a);return(Math.abs(o[0]-n[0])+1)*(Math.abs(o[1]-n[1])+1)},getPicResolution:function(t,e,a){var n=P(t,a),o=P(e,a);return 256*(Math.abs(n[0]-o[0])+1)+"*"+256*(Math.abs(n[1]-o[1])+1)}};var F={isMapSource:function(t){return/\{z\}/.test(t)&&/\{x\}/.test(t)&&/\{y\}/.test(t)&&/^(http|https):\/\//.test(t)},formatTimestamp:function(t){var e=new Date(t);return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+" "+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")},timeStampFormatter:function(t){return parseInt(t%864e5/36e5)+":"+parseInt(t%36e5/6e4)+":"+parseInt(t%6e4/1e3)}},U={name:"ChangePasswordDialog",props:{show:{type:Boolean,default:!1}},data:function(){var t=this;return{showDialog:!1,form:{oldPass:"",newPass:"",checkPass:""},rules:{oldPass:[{validator:function(t,e,a){""===e?a(new Error("è¯·è¾“å…¥æ—§å¯†ç ")):a()},trigger:"blur"}],newPass:[{validator:function(e,a,n){""===a?n(new Error("è¯·è¾“å…¥æ–°å¯†ç ")):(""!==t.form.checkPass&&t.$refs.form.validateField("checkPass"),n())},trigger:"blur"},{min:6,message:"é•¿åº¦åœ¨6ä¸ªå­—ç¬¦ä»¥ä¸Š",trigger:"blur"}],checkPass:[{validator:function(e,a,n){""===a?n(new Error("è¯·å†æ¬¡è¾“å…¥å¯†ç ")):a!==t.form.newPass?n(new Error("ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´!")):n()},trigger:"blur"}]}}},watch:{show:function(t,e){this.showDialog=t}},methods:{open:function(){this.show=!0},handleClose:function(){this.$refs.form.resetFields(),this.$emit("update:show",!1)},submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;var a;(a={oldPassword:t.form.oldPass,newPassword:t.form.newPass},h({url:"/user/changePassword",method:"POST",data:a})).then(function(e){1==e.resultCode?(t.$message.success("ä¿®æ”¹æˆåŠŸï¼Œè¯·é‡æ–°ç™»é™†"),t.$router.push("/login"),t.showDialog=!1):t.$message.error(e.info)})})}}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"ä¿®æ”¹å¯†ç ",visible:t.showDialog,width:"600px"},on:{"update:visible":function(e){t.showDialog=e},close:t.handleClose}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"æ—§å¯†ç ",prop:"oldPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.form.oldPass,callback:function(e){t.$set(t.form,"oldPass",e)},expression:"form.oldPass"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"æ–°å¯†ç ",prop:"newPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.form.newPass,callback:function(e){t.$set(t.form,"newPass",e)},expression:"form.newPass"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"ç¡®è®¤æ–°å¯†ç ",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.form.checkPass,callback:function(e){t.$set(t.form,"checkPass",e)},expression:"form.checkPass"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.show=!1}}},[t._v("å– æ¶ˆ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("ç¡® å®š")])],1)],1)},staticRenderFns:[]};var E={components:{"change-password-dialog":a("VU/8")(U,R,!1,function(t){a("Cf2i")},"data-v-3e10d78a",null).exports},name:"Header",props:["cc"],data:function(){return{showWXQRDailog:!1,showActiveDialog:!1,showUserInfoDialog:!1,showSuccessDialog:!1,activationCode:"",showInstruction:!1,activeLoading:!1,picStep1:a("j3gX"),picStep2:a("2SFc"),picStep3:a("wb7n"),picStep4:a("aPsZ"),wechat:a("ja2c"),logo:a("Ugd/")}},computed:{getUser:function(){return this.$store.state.user},getUserType:function(){if(!this.getUser)return"";switch(this.getUser.type){case 1:return"æœˆå¡vip";case 2:return"æ°¸ä¹…vip";case 0:default:return"æ™®é€šç”¨æˆ·"}}},methods:{openLink:function(){this.$confirm("ç³»ç»Ÿå³å°†è·³è½¬åˆ°æ¢é™©è€…åœ°å›¾å®˜æ–¹å•†åŸï¼Œæ”¯ä»˜é€”å¾„ä¸ºå®˜æ–¹é€”å¾„ï¼Œè¯·æ”¾å¿ƒè´­ä¹°","æç¤º",{confirmButtonText:"ç¡®å®š",type:"info"}).then(function(){window.open("http://hxy2020.com","_blank")})},startActive:function(){this.$store.getters.vipIsAvailable?this.$message.info("æ‚¨å·²ç»æ˜¯vipç”¨æˆ·"):this.showActiveDialog=!this.showActiveDialog},formatTimestamp:function(t){return F.formatTimestamp(t)},logout:function(){this.$store.commit("clearUser"),this.$router.push("/login")},saveActivationCode:function(){var t,e=this;""!=this.activationCode.trim()&&(this.activeLoading=!0,(t=this.activationCode,h({url:"/user/active?activeCode="+t,method:"GET"})).then(function(t){e.activeLoading=!1,-1==t.resultCode&&e.$message.error(t.info),1==t.resultCode&&(e.showActiveDialog=!1,e.$confirm("æ¿€æ´»æˆåŠŸ,å³å°†è·³è½¬åˆ°é‡æ–°ç™»é™†é¡µé¢","æç¤º",{confirmButtonText:"ç¡®å®š",type:"success"}).then(function(){e.logout()}).catch(function(){}))}))},changeLatlngFormat:function(){j.changeLatlngFormat(),this.$message.success("åæ ‡æ ¼å¼å·²åˆ‡æ¢")}},mounted:function(){}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-container"},[a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{staticClass:"header-left",attrs:{span:12}},[a("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:t.logo}}),t._v(" "),a("span",{staticClass:"system-name"},[t._v("é«˜æ¸…åœ°å›¾æ‹¼æ¥ç³»ç»Ÿ")]),t._v(" "),a("span",{staticClass:"center-coord",staticStyle:{"line-height":"60px",height:"60px"},domProps:{innerHTML:t._s(t.cc)},on:{click:t.changeLatlngFormat}})]),t._v(" "),a("el-col",{staticClass:"header-right",attrs:{span:12}},[a("span",{staticClass:"menu",on:{click:function(e){t.showWXQRDailog=!0}}},[t._v("æ„è§åé¦ˆ")]),t._v(" "),a("span",{staticClass:"menu",on:{click:function(e){t.showInstruction=!t.showInstruction}}},[t._v("ä½¿ç”¨è¯´æ˜")]),t._v(" "),a("span",{staticClass:"menu",staticStyle:{color:"red"},on:{click:function(e){return t.openLink()}}},[t._v("è´­ä¹°æ¿€æ´»ç ")]),t._v(" "),a("el-dropdown",{attrs:{trigger:"click"}},[a("div",{staticClass:"user-manager"},[t.getUser?a("div",{staticClass:"user-name"},[t._v(t._s(t.getUser.userName)+"â€ƒ"),a("el-tag",[t._v(t._s(t.getUserType))])],1):a("div",{staticClass:"user-name"},[t._v("è¯·å…ˆç™»é™†")])]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){t.showUserInfoDialog=!t.showUserInfoDialog}}},[t._v("ç”¨æˆ·ä¿¡æ¯")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(e){t.showChangePasswordDailog=!t.showChangePasswordDailog}}},[t._v("ä¿®æ”¹å¯†ç ")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(e){return t.startActive()}}},[t._v("æ¿€æ´»è´¦å·")]),t._v(" "),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(e){return t.logout.apply(null,arguments)}}},[t._v("é€€å‡ºç™»é™†")])],1)],1)],1)],1),t._v(" "),a("el-dialog",{staticClass:"mydialog",attrs:{visible:t.showUserInfoDialog,title:"ç”¨æˆ·ä¿¡æ¯",width:"600px"},on:{"update:visible":function(e){t.showUserInfoDialog=e}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"title"},[t._v("ç”¨æˆ·å:")])]),t._v(" "),a("el-col",{attrs:{span:16}},[a("span",[t._v(t._s(t.getUser.userName))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"title"},[t._v("æ³¨å†Œæ—¶é—´:")])]),t._v(" "),a("el-col",{attrs:{span:16}},[a("span",[t._v(t._s(t.formatTimestamp(t.getUser.createTime)))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"title"},[t._v("ä¸Šæ¬¡ç™»é™†æ—¶é—´:")])]),t._v(" "),a("el-col",{attrs:{span:16}},[a("span",[t._v(t._s(t.formatTimestamp(t.getUser.lastIn)))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"title"},[t._v("ä¼šå‘˜ç±»å‹:")])]),t._v(" "),a("el-col",{attrs:{span:16}},[a("span",{domProps:{innerHTML:t._s(t.getUserType)}})])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"title"},[t._v("ä¼šå‘˜è¿‡æœŸæ—¶é—´:")])]),t._v(" "),a("el-col",{attrs:{span:16}},[a("span",[t._v(t._s(0==t.getUser.expiration?"-":t.formatTimestamp(t.getUser.expiration)))])])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showUserInfoDialog=!1}}},[t._v("ç¡®å®š")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"mydialog",attrs:{visible:t.showActiveDialog,title:"è¯·è¾“å…¥æ¿€æ´»ç ",width:"600px"},on:{"update:visible":function(e){t.showActiveDialog=e}}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥æ¿€æ´»ç "},model:{value:t.activationCode,callback:function(e){t.activationCode=e},expression:"activationCode"}}),t._v(" "),a("div",{staticStyle:{"text-align":"left","margin-top":"10px","font-size":"12px"}},[""===t.activationCode?a("span",{staticStyle:{color:"red"}},[t._v("*æ¿€æ´»ç ä¸èƒ½ä¸ºç©º")]):t._e()]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.activeLoading},on:{click:t.saveActivationCode}},[t._v("æ¿€æ´»è´¦å·")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"mydialog",attrs:{title:"æ‰«æä¸‹æ–¹å¾®ä¿¡è”ç³»å®¢æœ",visible:t.showWXQRDailog,width:"400px"},on:{"update:visible":function(e){t.showWXQRDailog=e}}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{width:"120px",height:"120px"},attrs:{src:t.wechat}})])]),t._v(" "),a("el-dialog",{staticClass:"mydialog",attrs:{title:"ä½¿ç”¨è¯´æ˜",visible:t.showInstruction,width:"600px"},on:{"update:visible":function(e){t.showInstruction=e}}},[a("div",{staticStyle:{"text-align":"left","max-height":"700px","overflow-y":"auto"}},[a("h2",[t._v("âœ…åˆ¶ä½œåœ°å›¾")]),t._v(" "),a("ul",[a("li",[a("h3",[t._v("step1 ç‚¹å‡»å³ä¾§å·¥å…·æ çš„æ‹¼æ¥æŒ‰é’®ï¼Œç„¶åç‚¹å‡»åœ°å›¾é€‰æ‹©è¦æ‹¼æ¥çš„åŒºåŸŸ")]),t._v(" "),a("p",[a("img",{staticClass:"instruction-img",attrs:{src:t.picStep1}})])]),t._v(" "),a("li",[a("h3",[t._v("step2 åœ¨å¼¹å‡ºçš„èœå•ä¸­è¿›è¡Œç›¸å…³å‚æ•°çš„é…ç½®ï¼Œæ³¨æ„ç³»ç»Ÿæœ€å¤§æ”¯æŒ1000å—åœ°å›¾çš„æ‹¼æ¥")]),t._v(" "),a("p",[a("img",{staticClass:"instruction-img",attrs:{src:t.picStep2}})])]),t._v(" "),a("li",[a("h3",[t._v("step3 é€šè¿‡ä»»åŠ¡åˆ—è¡¨æŒæ¡ä»»åŠ¡å®Œæˆæƒ…å†µï¼Œåœ¨ä»»åŠ¡å®Œæˆåï¼Œæ‚¨å¯ä»¥ç‚¹å‡»â€œä¸‹è½½â€ç›´æ¥ä¸‹è½½æ‹¼æ¥å¥½çš„åŸå›¾ï¼Œä¹Ÿå¯ç‚¹å‡»â€œå åŠ ç½‘æ ¼â€è¿›è¡Œç½‘ç»œå åŠ æ“ä½œ")]),t._v(" "),a("p",[a("img",{staticClass:"instruction-img",attrs:{src:t.picStep3}})])]),t._v(" "),a("li",[a("h3",[t._v("step4 è°ƒèŠ‚ç½‘æ ¼æ ·å¼ï¼Œæœ€åç‚¹å‡»ä¿å­˜å›¾ç‰‡å¯å®Œæˆæœ€ç»ˆæˆå“çš„ä¸‹è½½")]),t._v(" "),a("p",[a("img",{staticClass:"instruction-img",attrs:{src:t.picStep4}})])])]),t._v(" "),a("h2",[t._v("âœ…æ³¨æ„äº‹é¡¹")]),t._v(" "),a("p",[t._v("1.è½¯ä»¶ä¸æ”¯æŒwebpç“¦ç‰‡æ–‡ä»¶çš„æ ¼å¼åœ°å›¾æº")]),t._v(" "),a("p",[t._v("2.æ¯æ—¥å‡Œæ™¨2ç‚¹ç³»ç»Ÿä¼šè¿›è¡Œè¯¢æŸ¥åˆ é™¤æ‰€æœ‰ç”Ÿæˆçš„æ‹¼æ¥å›¾ç‰‡ï¼Œè¯·åŠæ—¶ä¸‹è½½å®Œæˆçš„ä»»åŠ¡")]),t._v(" "),a("p",[t._v("3.ç³»ç»Ÿåªæ”¯æŒä¸å¤§äº1000å—ç“¦ç‰‡çš„æ‹¼æ¥ï¼Œå¦‚æœå¤§äº1000å—å»ºè®®åˆ†ç‰‡æ‹¼æ¥")]),t._v(" "),a("p",[t._v("4.évipç”¨æˆ·åªèƒ½ä¸‹è½½ä¸å¤§äº100å—çš„åœ°å›¾ï¼Œå¹¶ä¸”å¸¦æœ‰æ°´å°")]),t._v(" "),a("p",[t._v("5.ç³»ç»Ÿæš‚æ— æ³•å åŠ ä¸­æ–‡æ ‡æ³¨å±‚")]),t._v(" "),a("h2",[t._v("âœ…è´¦å·æ”¶è´¹æ ‡å‡†")]),t._v(" "),a("p",[t._v("ğŸš€ 1.30å…ƒæ¯æœˆ")]),t._v(" "),a("p",[t._v("ğŸš€ 2.99å…ƒæ°¸ä¹…")])])]),t._v(" "),a("change-password-dialog",{attrs:{show:t.showChangePasswordDailog},on:{"update:show":function(e){t.showChangePasswordDailog=e}}})],1)},staticRenderFns:[]};var z,B,G=a("VU/8")(E,A,!1,function(t){a("jYkd")},"data-v-72260bae",null).exports,N=a("mvHQ"),O=a.n(N),V=a("nrd6"),W=a.n(V),H="mapCenter",Y="mapZoom",q={baseLayer:null,chosenSourceId:0,overlayList:[{name:"å¤©åœ°å›¾ä¸­æ–‡æ ‡æ³¨",url:"https://t1.tianditu.gov.cn/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=be2aa91c7840082553f3039a8016b5b5",system:!0,attribution:'&copy; <a href="https://www.tianditu.gov.cn/">å¤©åœ°å›¾</a> ç”²æµ‹èµ„å­—1100471 GS(2023)336å·'}],baseLayerList:[],getBaseLayerSource:function(){return 0==this.baseLayerList.length?null:this.baseLayerList[this.chosenSourceId]},getBaseLayer:function(){var t=this.baseLayerList[this.chosenSourceId];return this.baseLayer=W.a.tileLayer(t.url,{zIndex:1,attribution:t.attribution||""}),this.baseLayer},setMapSource:function(t){t>=this.baseLayerList.length||(this.chosenSourceId=t,this.baseLayer&&z.removeLayer(this.baseLayer),this.getBaseLayer().addTo(z))}};function X(t){var e,a;(z=W.a.map(t,{zoomControl:!1,attributionControl:!1}).setView([39.9158,116.3958],13)).addControl(W.a.control.attribution({prefix:!1})),e=JSON.parse(localStorage.getItem(H)),a=localStorage.getItem(Y),e&&a&&z.setView(e,a),W.a.control.zoom({position:"bottomleft"}).addTo(z),B=W.a.layerGroup([],{name:"default-layer-group",sys:!1}).addTo(z)}var Q={name:"RectanglePopup",props:{params:Object},computed:{},data:function(){return{}},watch:{},mounted:function(){},methods:{del:function(){this.params.myRectangle.remove()}}},J={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("div",{staticStyle:{"font-size":"18px","line-height":"1.8em"},domProps:{innerHTML:this._s(this.params.info)}}),this._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:this.del}},[this._v("åˆ é™¤")])],1)},staticRenderFns:[]};var Z=a("VU/8")(Q,J,!1,function(t){a("lkQp")},"data-v-54695d7f",null).exports;function K(t,e,a){return new(n.default.component(e,t))({propsData:a}).$mount().$el}var tt,et={radius:4,weight:2,stroke:!0,color:"red",fill:!0,fillOpacity:1,fillColor:"#ff7800"},at=W.a.divIcon({html:"å…·ä½“å†…å®¹",iconSize:[200,35],iconAnchor:[100,20],className:"rectangle-label"}),nt=null,ot=void 0,it=void 0,st=void 0,rt=void 0,lt=void 0,ct=void 0,ut={color:"#0066cc",weight:3,stroke:!0,opacity:1,dashArray:[10,10]},dt=function(t){!function(t){ot||(ot=W.a.layerGroup().addTo(B));if(ot.addLayer(W.a.circleMarker(t,et)),rt)return lt=t,ut.dashArray=null,it=W.a.rectangle([rt,lt],ut),ot.addLayer(it),tt({leftTop:rt,rightBottom:lt,info:ht(it)}),void function(){var t={info:ht(it),myRectangle:ot},e=K(Z,"PolygonInfo",{params:t}),a=W.a.popup().setContent(e);it.bindPopup(a),ct.innerHTML="ç‚¹å‡»é€‰å–ç¬¬ä¸€ä¸ªç‚¹",st&&st.remove();ot=null,rt=null,lt=null,nt=null}();rt=t}(t.latlng)},mt=function(t){!function(t){W.a.DomUtil.setPosition(ct,t.containerPoint),rt&&(ct.innerHTML="ç‚¹å‡»é€‰å–ç¬¬äºŒä¸ªç‚¹",lt=t.latlng,st&&st.remove(),ut.dashArray=[10,10],(st=W.a.rectangle([rt,lt],ut)).addTo(B),at.options.html=ht(st),nt?(nt.setLatLng(st.getCenter()),nt.setIcon(at)):(nt=W.a.marker(st.getCenter(),{icon:at}),ot.addLayer(nt)))}(t)};function ht(t){var e=j.getWidthAndHigh(t),a=j.formatArea(t);return"é•¿å®½ï¼š"+j.formatLength(e[0])+"*"+j.formatLength(e[1])+"<br>é¢ç§¯ï¼š"+a}var pt={start:function(t){tt=t,(ct=W.a.DomUtil.create("div","widget tips",W.a.DomUtil.get("map"))).innerHTML="<span>ç‚¹å‡»é€‰å–ç¬¬ä¸€ä¸ªç‚¹<span>",z.on("click",dt),z.on("mousemove",mt)},end:function(){ct&&W.a.DomUtil.remove(ct),z.off("click",dt),z.off("mousemove",mt)}},vt=a("fyjX"),gt=(a("A8PI"),{name:"polylineTooltip",props:{params:Object},computed:{},data:function(){return{}},watch:{},mounted:function(){},methods:{del:function(){this.params.myPolyline.remove()}}}),ft={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("div",{staticStyle:{"font-size":"18px","line-height":"1.8em"}},[this._v("\n    "+this._s(this.params.dis.toFixed(2)+"km")+"\n  ")]),this._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:this.del}},[this._v("åˆ é™¤")])],1)},staticRenderFns:[]};var _t=a("VU/8")(gt,ft,!1,function(t){a("ZSwC")},"data-v-1adf5f61",null).exports,wt={color:"blue",weight:10,description:""},yt=W.a.Symbol.marker({rotate:!0,markerOptions:{icon:W.a.icon({iconUrl:"./static/icons/arrow.png",iconAnchor:[8,8],iconSize:[16,16]})}}),bt=null,xt=null,St=void 0,Ct=void 0,Lt=function(t){!function(t){if(null==bt)return Ct=W.a.layerGroup().addTo(B),bt=W.a.polyline([t],wt).addTo(Ct),void(xt=W.a.polyline([],{color:"red",dashArray:[10,10]}).addTo(Ct));bt.addLatLng(t)}(t.latlng)},kt=function(t){!function(t){var e=t.latlng;if(W.a.DomUtil.setPosition(St,t.containerPoint),null!=xt&&null!=bt){var a=bt.getLatLngs(),n=a[a.length-1],o=[n,e];xt.setLatLngs(o),i=Object(vt.length)(bt.toGeoJSON(),{units:"kilometers"})+Object(vt.length)(xt.toGeoJSON(),{units:"kilometers"}),St.innerHTML=i.toFixed(2)+"Km<br>åŒå‡»ç»“æŸæ ‡ç»˜"}var i}(t)},Tt=function(t){var e,a,n;e=Object(vt.length)(bt.toGeoJSON(),{units:"kilometers"}),a=K(_t,"polylineTooltip",{params:{dis:e,myPolyline:Ct}}),n=W.a.popup().setContent(a),bt.bindPopup(n),xt.remove(),W.a.polylineDecorator(bt,{patterns:[{offset:1,endOffset:1,repeat:"100",symbol:yt}]}).addTo(Ct),bt=null,St.innerHTML="ç‚¹å‡»é€‰æ‹©ç¬¬ä¸€ä¸ªç‚¹"};var Mt={start:function(){(St=W.a.DomUtil.create("div","widget tips",W.a.DomUtil.get("map"))).innerHTML="<span>ç‚¹å‡»é€‰å–ç¬¬ä¸€ä¸ªç‚¹<span>",z.on("click",Lt),z.on("mousemove",kt),z.on("dblclick",Tt)},end:function(){St&&W.a.DomUtil.remove(St),z.off("click",Lt),z.off("mousemove",kt),z.off("dblclick",Tt)}},Dt={props:{show:{type:Boolean,default:!1}},data:function(){return{showDialog:!1,activeTab:"0",latlng:{lat:0,lng:0},latlngDMS:{lat:{d:0,m:0,s:0},lng:{d:0,m:0,s:0}},xy:{x:0,y:0},cgcsDiviedType:"3"}},watch:{show:function(t,e){this.showDialog=t}},methods:{submitForm:function(){switch(this.activeTab){case"0":j.isLatLngValid(this.latlng)?(z.panTo(this.latlng,{animate:!0}),this.showDialog=!1):this.$message.error("è¾“å…¥æ ¼å¼é”™è¯¯è¯·æ£€æŸ¥ï¼");break;case"1":if(j.isLatLngDMSValid(this.latlngDMS)){var t=j.convertLatLngDMStoLatLng(this.latlngDMS);z.panTo(t,{animate:!0}),this.showDialog=!1}else this.$message.error("è¾“å…¥æ ¼å¼é”™è¯¯è¯·æ£€æŸ¥ï¼");break;case"2":if(j.isXYValid(this.xy)){var e=j.convertCGCS2000GaussToWGS84(this.xy,this.cgcsDiviedType);console.log(e),z.panTo(e,{animate:!0})}else this.$message.error("xyä¸åˆæ³•,è¯·è¾“å…¥å¸¦å¸¦å·çš„å®Œæ•´åæ ‡å€¼")}},handleClose:function(){this.$emit("update:show",!1)}}},$t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"åæ ‡æ‰¾ç‚¹",visible:t.showDialog,width:"50%","append-to-body":!0},on:{"update:visible":function(e){t.showDialog=e},close:t.handleClose}},[a("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"ç»çº¬åº¦"}},[a("div",[a("el-row",[a("el-col",{staticClass:"title",attrs:{span:4}},[a("span",[t._v("ç»åº¦ï¼š")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç»åº¦",type:"number"},model:{value:t.latlng.lat,callback:function(e){t.$set(t.latlng,"lat",t._n(e))},expression:"latlng.lat"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"title",attrs:{span:4}},[a("span",[t._v("çº¬åº¦ï¼š")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥çº¬åº¦",type:"number"},model:{value:t.latlng.lng,callback:function(e){t.$set(t.latlng,"lng",t._n(e))},expression:"latlng.lng"}})],1)],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"ç»çº¬åº¦"}},[a("div",[a("el-row",[a("el-col",{staticClass:"title",attrs:{span:4}},[a("span",[t._v("ç»åº¦ï¼š")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç»åº¦"},model:{value:t.latlngDMS.lng.d,callback:function(e){t.$set(t.latlngDMS.lng,"d",t._n(e))},expression:"latlngDMS.lng.d"}})],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[t._v("Â°")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç»åº¦"},model:{value:t.latlngDMS.lng.m,callback:function(e){t.$set(t.latlngDMS.lng,"m",t._n(e))},expression:"latlngDMS.lng.m"}})],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[t._v("â€²")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç»åº¦"},model:{value:t.latlngDMS.lng.s,callback:function(e){t.$set(t.latlngDMS.lng,"s",t._n(e))},expression:"latlngDMS.lng.s"}})],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[t._v("â€³")])],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"title",attrs:{span:4}},[a("span",[t._v("çº¬åº¦ï¼š")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç»åº¦"},model:{value:t.latlngDMS.lat.d,callback:function(e){t.$set(t.latlngDMS.lat,"d",t._n(e))},expression:"latlngDMS.lat.d"}})],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[t._v("Â°")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç»åº¦"},model:{value:t.latlngDMS.lat.m,callback:function(e){t.$set(t.latlngDMS.lat,"m",t._n(e))},expression:"latlngDMS.lat.m"}})],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[t._v("â€²")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç»åº¦"},model:{value:t.latlngDMS.lat.s,callback:function(e){t.$set(t.latlngDMS.lat,"s",t._n(e))},expression:"latlngDMS.lat.s"}})],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[t._v("â€³")])],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"CGCS2000"}},[a("div",[a("el-row",[a("el-col",{staticClass:"title",attrs:{span:4}},[a("span",[t._v("Xï¼š")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥çºµåæ ‡"},model:{value:t.xy.x,callback:function(e){t.$set(t.xy,"x",t._n(e))},expression:"xy.x"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"title",attrs:{span:4}},[a("span",[t._v("Yï¼š")])]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥æ¨ªåæ ‡"},model:{value:t.xy.y,callback:function(e){t.$set(t.xy,"y",t._n(e))},expression:"xy.y"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"title",attrs:{span:4}},[t._v("\n            åˆ†å¸¦ç±»å‹\n          ")]),t._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:t.cgcsDiviedType,callback:function(e){t.cgcsDiviedType=e},expression:"cgcsDiviedType"}},[t._v("3åº¦å¸¦")]),t._v(" "),a("el-radio",{attrs:{label:"6"},model:{value:t.cgcsDiviedType,callback:function(e){t.cgcsDiviedType=e},expression:"cgcsDiviedType"}},[t._v("6åº¦å¸¦")])],1)],1)])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showDialog=!1}}},[t._v("å– æ¶ˆ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("ç¡® å®š")])],1)],1)},staticRenderFns:[]};var It=a("VU/8")(Dt,$t,!1,function(t){a("Tnnd")},"data-v-c1cb6174",null).exports,Pt={props:{show:{type:Boolean,default:!1},info:{type:Object,default:{leftTop:null,rightBottom:null,grid:0,gridColor:"#000000",zoom:15,gridWidth:2}}},data:function(){return{showDialog:!1}},watch:{show:function(t,e){this.showDialog=t}},computed:{picResolution:function(){return null==this.info.leftTop||0==this.info.rightBottom?0:j.getPicResolution(this.info.leftTop,this.info.rightBottom,this.info.zoom)},totalTileSize:function(){return null==this.info.leftTop||0==this.info.rightBottom?0:j.calcTotalTileSize(this.info.leftTop,this.info.rightBottom,this.info.zoom)},leftTopStr:function(){return j.formatLatlng(this.info.leftTop)},rightBottomStr:function(){return j.formatLatlng(this.info.rightBottom)}},methods:{handleClose:function(){this.$emit("update:show",!1)},splice:function(){var t=this;if(this.totalTileSize>1e3)this.$message.error("å¤§äº1000å—å°†ä¼šæé«˜å—ç½‘é€Ÿå½±å“çš„ä¸ç¡®å®šæ€§ï¼Œå»ºè®®è¿›è¡Œåˆ†å‰²ä¸‹è½½ï¼");else if(this.$store.getters.vipIsAvailable)p(this.info).then(function(e){if(1==e.resultCode){var a=e.result;t.$message.success("ä»»åŠ¡ "+a+" æ·»åŠ æˆåŠŸ..."),t.$store.commit("addTask",a),t.showDialog=!1}else t.$message.error(e.result)});else{if(this.totalTileSize>100)return void this.$message.error("évipç”¨æˆ·åªèƒ½æ‹¼æ¥å°äº100å¼ ç“¦ç‰‡");this.$confirm("évipç”¨æˆ·åªèƒ½æ‹¼æ¥å°äº100å¼ ç“¦ç‰‡ä¸”å¸¦æœ‰æ°´å°","å·²çŸ¥æ™“",{type:"success",title:"æç¤º"}).then(function(){p(t.info).then(function(e){if(1==e.resultCode){var a=e.result;t.$message.success("ä»»åŠ¡ "+a+" æ·»åŠ æˆåŠŸ..."),t.$store.commit("addTask",a),t.showDialog=!1}else t.$message.error(e.result)})})}},gridChange:function(){console.log(this.info),2==this.info.grid&&this.info.level<13&&this.$message.error("é«˜æ–¯åæ ‡ç½‘ä»…åœ¨å¤§äº13çº§çš„æƒ…å†µä¸‹æ‰ä¼šæ·»åŠ ï¼Œè¯·è°ƒæ•´ä¸‹è½½å±‚çº§æˆ–è€…æ˜¯ä¸‹è½½åŒºåŸŸèŒƒå›´ï¼")}}},jt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"mydialog",attrs:{title:"æ‹¼æ¥åœ°å›¾",visible:t.showDialog,width:"800px","append-to-body":!0},on:{"update:visible":function(e){t.showDialog=e},close:t.handleClose}},[a("el-row",[a("el-col",{attrs:{span:4}},[t._v("ä»»åŠ¡åç§°")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:t.info.name,callback:function(e){t.$set(t.info,"name",e)},expression:"info.name"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[t._v("å›¾æºåç§°")]),t._v(" "),a("el-col",{staticStyle:{"font-weight":"bold"},attrs:{span:20}},[t._v("\n      "+t._s(t.info.mapSourceName)+"\n    ")])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[t._v("åæ ‡ä¿¡æ¯")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("span",{staticStyle:{display:"block"}},[t._v("\n        "+t._s(t.leftTopStr)+"\n        â€ƒ"+t._s(t.rightBottomStr)+"\n      ")])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[t._v("åŸºæœ¬ä¿¡æ¯")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("span",{domProps:{innerHTML:t._s(t.info.info)}})])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[t._v("æ‹¼æ¥å±‚çº§")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input-number",{staticStyle:{width:"150px"},attrs:{min:1,max:20,label:"æè¿°æ–‡å­—"},model:{value:t.info.zoom,callback:function(e){t.$set(t.info,"zoom",e)},expression:"info.zoom"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[t._v("é¢„è®¡å¤§å°")]),t._v(" "),a("el-col",{attrs:{span:20}},[t._v("\n      å¤§çº¦éœ€è¦ä¸‹è½½ "),a("b",[t._v(t._s(t.totalTileSize))]),t._v(" ç‰‡åœ°å›¾ï¼Œåˆ†è¾¨ç‡ "),a("b",[t._v(t._s(t.picResolution)+" ")])])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showDialog=!1}}},[t._v("å–æ¶ˆ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.splice}},[t._v("å¼€å§‹æ‹¼æ¥")])],1)],1)},staticRenderFns:[]};var Ft={name:"ToolBar",components:{SearchDialog:It,SpliceDialog:a("VU/8")(Pt,jt,!1,function(t){a("enV7")},"data-v-518807e5",null).exports},data:function(){return{showMore:!1,upIcon:"&#xe666;",downIcon:"&#xe665;",isDrawingRectangle:!1,plotModel:-1,searchDialog:{show:!1},showSpliceDialog:!1,spliceInfo:{name:"",leftTop:null,rightBottom:null,grid:0,gridColor:"#000000",gridWidth:2,level:15,info:""}}},methods:{confirmSplice:function(t){null!=q.getBaseLayerSource()?(this.showSpliceDialog=!0,this.isDrawingRectangle=!1,this.spliceInfo={name:"ä»»åŠ¡"+(new Date).getTime(),leftTop:t.leftTop,rightBottom:t.rightBottom,info:t.info,grid:0,gridColor:"#000000",gridWidth:2,zoom:15,mapSourceName:q.getBaseLayerSource().name,mapSourceId:q.getBaseLayerSource().id}):this.$message.error("å½“å‰æ— åœ°å›¾")},clearAll:function(){-1==this.plotModel?B.eachLayer(function(t){B.removeLayer(t)}):this.$message.error("è¯·å…ˆç»“æŸç»˜åˆ¶")},splice:function(){console.log("start")},changeModel:function(t){if(Mt.end(),pt.end(),this.plotModel!=t)switch(this.plotModel=t,this.plotModel){case 0:pt.start(this.confirmSplice);break;case 1:Mt.start()}else this.plotModel=-1}}},Ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tool-container widget"},[a("div",{staticClass:"tool-list"},[a("div",{staticClass:"tool-button",style:0==t.plotModel?{background:"#00000040"}:"",on:{click:function(e){return t.changeModel(0)}}},[t._m(0),t._v(" "),a("div",{staticClass:"text"},[t._v("æ‹¼æ¥")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"more"},[a("div",{staticClass:"tool-button",style:1==t.plotModel?{background:"#00000040"}:"",on:{click:function(e){return t.changeModel(1)}}},[t._m(1),t._v(" "),a("div",{staticClass:"text"},[t._v("æ ‡çº¿")])]),t._v(" "),a("el-popconfirm",{attrs:{title:"ç¡®å®šåˆ é™¤å½“å‰æ‰€æœ‰æ ‡ç»˜ä¹ˆï¼Ÿ"},on:{confirm:function(e){return t.clearAll()}}},[a("div",{ref:"clearAll",staticClass:"tool-button",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"icon"},[a("i",{staticClass:"iconfont button-icon"},[t._v("î›‡")])]),t._v(" "),a("div",{staticClass:"text"},[t._v("æ¸…é™¤")])])]),t._v(" "),a("div",{staticClass:"tool-button",on:{click:function(e){t.searchDialog.show=!t.searchDialog.show}}},[t._m(2),t._v(" "),a("div",{staticClass:"text"},[t._v("æ‰¾ç‚¹")])])],1),t._v(" "),a("div",{staticClass:"tool-button",on:{click:function(e){t.showMore=!t.showMore}}},[a("div",{staticClass:"icon"},[a("i",{staticClass:"iconfont button-icon",domProps:{innerHTML:t._s(t.showMore?t.upIcon:t.downIcon)}})]),t._v(" "),a("div",{staticClass:"text"},[t._v("å·¥å…·")])])]),t._v(" "),a("SearchDialog",{attrs:{show:t.searchDialog.show},on:{"update:show":function(e){return t.$set(t.searchDialog,"show",e)}}}),t._v(" "),a("SpliceDialog",{attrs:{show:t.showSpliceDialog,info:t.spliceInfo},on:{"update:show":function(e){t.showSpliceDialog=e}}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"iconfont button-icon"},[this._v("î˜‘")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"iconfont button-icon"},[this._v("î˜")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon"},[e("i",{staticClass:"iconfont button-icon"},[this._v("îš‹")])])}]};var Rt=a("VU/8")(Ft,Ut,!1,function(t){a("bYgV")},"data-v-2502b486",null).exports,Et={name:"MapList",methods:{del:function(t){var e=this;this.$confirm("æ˜¯å¦è¦åˆ é™¤è¿™ä¸ªå›¾æº","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(function(){var a,n=q.baseLayerList[t].id;(a=n,h({url:"/user/source/del?sourceId="+a,method:"GET"})).then(function(t){if(1==t.resultCode){var a=t.result;q.baseLayerList=a,e.$message.success("åˆ é™¤æˆåŠŸ")}})}).catch(function(){})},saveMapSource:function(){var t=this;console.log("validate"),this.$refs.form.validate(function(e){var a;e&&(F.isMapSource(t.form.url)?(t.saveIsLoading=!0,(a={name:t.form.name,url:t.form.url},h({url:"/user/source/add",method:"POST",data:a})).then(function(e){if(1==e.resultCode){var a=e.result;q.baseLayerList=a,t.$message.success("æ·»åŠ æˆåŠŸ"),t.addDialogVisible=!1}else t.$message.error("æ·»åŠ é”™è¯¯");t.saveIsLoading=!1})):t.$message.error("åœ°å›¾æºåœ°å€ä¸è§„èŒƒ"))})},closeDialog:function(){this.addDialogVisible=!1},changeBaseMap:function(t){q.setMapSource(t)}},computed:{nowBaseLayerName:function(){return null==q.getBaseLayerSource()?"":q.getBaseLayerSource().name}},data:function(){return{msg:"Welcome to Your Vue.js App",dialogVisible:!1,addDialogVisible:!1,baseLayerConfig:q,saveIsLoading:!1,form:{name:"",url:""},rules:{name:[{required:!0,message:"è¯·è¾“å…¥åç§°",trigger:"blur"}],url:[{required:!0,message:"è¯·è¾“å…¥URLåœ°å€",trigger:"blur"}]}}}},At={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-list-container widget"},[a("el-dropdown",[a("el-button",[t._v(t._s(t.nowBaseLayerName)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.baseLayerConfig.baseLayerList,function(e,n){return a("el-dropdown-item",{key:n,class:{bord:n==t.baseLayerConfig.chosenSourceId},nativeOn:{click:function(e){return t.changeBaseMap(n)}}},[t._v("\n                "+t._s(e.name)+"\n            ")])}),t._v(" "),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(e){t.dialogVisible=!t.dialogVisible}}},[t._v("ç®¡ç†åœ°å›¾")])],2)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,title:"ç®¡ç†åœ°å›¾æº","append-to-body":!0,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.baseLayerConfig.baseLayerList}},[a("el-table-column",{attrs:{prop:"name",label:"åœ°å›¾æºåç§°"}}),t._v(" "),a("el-table-column",{attrs:{label:"æ“ä½œ",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[-1==e.row.owner?a("span",{staticStyle:{color:"green"}},[t._v("ç³»ç»Ÿè‡ªå¸¦")]):a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.del(e.$index)}}},[t._v("åˆ é™¤")])]}}])})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px","text-align":"right"}},[a("el-button",{attrs:{type:"success"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("æ·»åŠ å›¾æº")])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.addDialogVisible,title:"æ·»åŠ æ–°åœ°å›¾æº",width:"50%","append-to-body":!0},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"åç§°",prop:"name"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"URLåœ°å€",prop:"url"}},[a("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),a("el-form-item",[t._v("\n                    urlæ ¼å¼æ ·å¼ï¼šhttp://www.map.org/{z}/{x}/{y}.png,{z}ã€{x}ã€{y}ä¸ºå¿…è¦å‚æ•°ã€‚\n                ")])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("å– æ¶ˆ")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.saveIsLoading},on:{click:t.saveMapSource}},[t._v("ç¡® å®š")])],1)],1)],1)],1)},staticRenderFns:[]};var zt=a("VU/8")(Et,At,!1,function(t){a("W+m7")},"data-v-5e19c1fa",null).exports,Bt={data:function(){return{name:"tasklist",showDialog:!1,taskInfo:[],timer:null,baseURL:m+"/user/down?name="}},watch:{},computed:{taskList:function(){return this.$store.state.taskList}},methods:{goToEdit:function(t,e,a,n,o,i){var s=this.$router.resolve({name:"edit",query:{imageFileName:t,maxX:e,maxY:a,minX:n,minY:o,zoom:i}});window.open(s.href,"_blank")},coastTime:function(t){return F.timeStampFormatter((new Date).getTime()-t)},statusToChinese:function(t){switch(t){case"START":return"å·²å¯åŠ¨";case"RUNNING":return"è¿›è¡Œä¸­";case"DOWNLOADING":return"ä¸‹è½½ä¸­";case"SPLICING":return"æ‹¼æ¥ä¸­";case"FINISHED":return"å®Œæˆ";case"ERROR":return"é”™è¯¯"}}},mounted:function(){var t=this,e=this.taskList;this.timer&&clearTimeout(this.timer),this.timer=setInterval(function(){var a;e.length>0&&(a={list:e},h({url:"/user/ps",method:"POST",data:a})).then(function(e){1==e.resultCode?t.taskInfo=e.result:t.$message.error(e.info)})},1e3)},destroyed:function(){this.timer&&clearTimeout(this.timer),this.$store.commit("clearTask")}},Gt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"widget tasklist"},[t._m(0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.taskInfo,expression:"taskInfo"}],staticClass:"list",staticStyle:{"max-height":"300px",overflow:"auto"}},t._l(t.taskInfo,function(e,n){return a("div",{staticClass:"list-item"},[e?a("div",[a("el-row",[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:12}},[t._v(t._s(e.name))]),t._v(" "),a("el-col",{attrs:{span:12}},[a("span",{style:"ERROR"==e.status?{color:"red"}:""},[t._v(t._s(t.statusToChinese(e.status)))]),t._v("â€ƒ\n                        "),"FINISHED"==e.status?a("a",{attrs:{href:t.baseURL+e.url}},[t._v("ä¸‹è½½")]):t._e(),t._v("\n                        â€ƒ\n                        "),"FINISHED"==e.status?a("a",{attrs:{href:"#"},on:{click:function(a){return t.goToEdit(e.url,e.maxX,e.maxY,e.minX,e.minY,e.zoom)}}},[t._v("å åŠ ç½‘æ ¼")]):t._e()])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-progress",{attrs:{percentage:Math.floor(e.process/e.total*100),color:"greenyellow"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{"line-height":"20px","font-size":"12px",color:"black"}},[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:16}},[t._v(" "+t._s(e.process)+" /"+t._s(e.total))]),t._v(" "),"FINISHED"!=e.status&&"ERROR"!=e.status?a("el-col",{attrs:{span:8}},[t._v("\n                        "+t._s(t.coastTime(e.startTime))+"\n                    ")]):t._e()],1)],1):t._e()])}),0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[this._v("ä»»åŠ¡åˆ—è¡¨"),e("span",{staticStyle:{"font-size":"12px",color:"red"}},[this._v("â€ƒä»»åŠ¡è¿›è¡Œä¸­è¯·å‹¿åˆ·æ–°é¡µé¢")])])}]};var Nt=a("VU/8")(Bt,Gt,!1,function(t){a("fj6b")},"data-v-65931910",null).exports,Ot={name:"MarkerPopup",props:{params:Object},computed:{getPos:function(){var t=this.params.marker.getLatLng();return j.formatLatlng(t)}},data:function(){return{}},watch:{},mounted:function(){},methods:{del:function(){this.params.marker.remove()}}},Vt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("div",{staticStyle:{"font-size":"18px","line-height":"1.8em"}},[this._v("\n    "+this._s(this.getPos)+"\n  ")]),this._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:this.del}},[this._v("åˆ é™¤")])],1)},staticRenderFns:[]};var Wt=a("VU/8")(Ot,Vt,!1,function(t){a("6Jvj")},"data-v-5038a2d5",null).exports;var Ht={name:"Map",components:{"main-header":G,"tool-bar":Rt,"map-list":zt,TaskList:Nt},data:function(){return{centerCoord:"",rightBtnPointLatlng:null}},methods:{closeContextMenu:function(){var t=document.getElementById("contextmenu_container");"block"==t.style.display&&(t.style.display="none")},moveToCenter:function(){null!=this.rightBtnPointLatlng&&z.panTo(this.rightBtnPointLatlng,{}),this.closeContextMenu()},addMarker:function(){null!=this.rightBtnPointLatlng&&function(t){var e=document.createElement("div");e.innerHTML='<img src="./static/icons/001.png" style="width:40px;height:40px"><div class="marker-text">marker</div>';var a={icon:W.a.divIcon({className:"my-div-icon",html:e,bgPos:t,iconAnchor:[24,40]}),iconUrl:"./static/icons/001.png",title:"title",description:"",time:(new Date).getTime(),textColor:"red"},n=W.a.marker(t,a);B.addLayer(n);var o=K(Wt,"MarkerPopup",{params:{marker:n}}),i=W.a.popup().setLatLng(t).setContent(o);n.bindPopup(i,{offset:[0,-40]})}(this.rightBtnPointLatlng),this.closeContextMenu()}},mounted:function(){var t=this;X("map"),z.on("mousemove",function(e){var a=e.latlng,n=j.formatLatlng(a);t.centerCoord=n}),z.on("contextmenu",function(e){var a=document.getElementById("contextmenu_container"),n=e.containerPoint.x,o=e.containerPoint.y;t.rightBtnPointLatlng=e.latlng,a.style.left=n+"px",a.style.top=o+"px",a.style.display="block"}),z.on("click",function(e){t.closeContextMenu()}),h({url:"/user/source/all",method:"GET"}).then(function(t){if(t&&1==t.resultCode){var e=t.result;q.baseLayerList=e||[],function(){q.getBaseLayer().addTo(z);var t=1;q.overlayList.forEach(function(e){t++,W.a.tileLayer(e.url,{zIndex:t,attribution:e.attribution||""}).addTo(z)})}()}}).catch(function(t){console.log(t)})}},Yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-container"},[a("main-header",{attrs:{cc:t.centerCoord}}),t._v(" "),a("map-list"),t._v(" "),a("tool-bar"),t._v(" "),a("TaskList"),t._v(" "),a("div",{attrs:{id:"map"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"cross"},[a("i",{staticClass:"iconfont",staticStyle:{"line-height":"40px","font-size":"20px"}},[t._v("îš³")])]),t._v(" "),a("div",{staticClass:"contextmenu",attrs:{id:"contextmenu_container"}},[a("ul",[a("li",{on:{click:t.moveToCenter}},[a("i",{staticClass:"iconfont",staticStyle:{"margin-right":"10px"}},[t._v("î¨ƒ")]),t._v("è®¾ä¸ºä¸­å¿ƒ")]),t._v(" "),a("li",{on:{click:t.addMarker}},[a("i",{staticClass:"iconfont",staticStyle:{"margin-right":"10px"}},[t._v("î ˜")]),t._v("æ·»åŠ åœ°æ ‡")])])])])],1)},staticRenderFns:[]};var qt=a("VU/8")(Ht,Yt,!1,function(t){a("/7gv")},"data-v-3e69208e",null).exports,Xt=a("NYxO");n.default.use(Xt.a);var Qt=new Xt.a.Store({state:{user:JSON.parse(localStorage.getItem("user"))||null,jwt:localStorage.getItem("jwt")||"",taskList:[]},mutations:{setUser:function(t,e){t.user=e,localStorage.setItem("user",O()(e)),localStorage.setItem("jwt",e.token)},clearUser:function(t){t.user=null,localStorage.removeItem("user"),localStorage.removeItem("jwt")},addTask:function(t,e){t.taskList.push(e)},clearTask:function(t){t.taskList=[]}},actions:{},getters:{vipIsAvailable:function(t){var e=t.user;return null!=e&&(new Date).getTime()-e.expiration<0}}}),Jt=a("BO1k"),Zt=a.n(Jt),Kt=a("6afr"),te=a.n(Kt);a("YW59");function ee(t,e){return t/Math.pow(2,e)*360-180}function ae(t,e){var a=Math.PI-2*Math.PI*t/Math.pow(2,e);return Math.atan(te()(a))*(180/Math.PI)}function ne(t,e,a){return{north:ae(e,a),south:ae(e+1,a),west:ee(t,a),east:ee(t+1,a)}}function oe(t,e){for(var a=[],n=Math.min(t,e),o=Math.max(t,e),i=1e3*Math.ceil(n/1e3);i<=o;i+=1e3)a.push(i);return a}var ie={data:function(){return{imagePadding:30,imageFileName:this.$route.query.imageFileName,maxX:parseInt(this.$route.query.maxX)||0,maxY:parseInt(this.$route.query.maxY)||0,minX:parseInt(this.$route.query.minX)||0,minY:parseInt(this.$route.query.minY)||0,zoom:parseInt(this.$route.query.zoom)||1,gridType:"none",gridColor:"#000000",gridLineWidth:1,canvas:null,ctx:null,img:null,scale:1,loading:!1,addTextEnabled:!0}},computed:{imageUrl:function(){return m+"/user/down?name="+this.imageFileName}},methods:{initCanvas:function(){var t=this;this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d");var e=this.$loading({lock:!0,text:"å›¾ç‰‡åŠ è½½ä¸­,è¯·ç¨ç­‰ï¼ˆè§†ç½‘é€Ÿä¸åŒï¼Œæ—¶é—´ç­‰å¾…æœ‰å·®å¼‚ï¼‰...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.img=new Image,this.img.crossOrigin="anonymous",this.img.src=this.imageUrl,this.img.onload=function(){e.close(),t.drawImage()},this.img.onerror=function(){e.close(),t.$message.error("å›¾ç‰‡åŠ è½½å¤±è´¥")}},drawImage:function(){this.ctx&&this.img&&(this.canvas.width=this.img.width+2*this.imagePadding,this.canvas.height=this.img.height+2*this.imagePadding,this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.img,this.imagePadding,this.imagePadding,this.img.width,this.img.height),this.drawGrid())},drawGrid:function(){"none"!==this.gridType&&(this.ctx.strokeStyle=this.gridColor,this.ctx.lineWidth=this.gridLineWidth,"gaussian"===this.gridType?this.drawGaussianGrid():"latitudeLongitude"===this.gridType&&this.drawLatitudeLongitudeGrid())},drawGaussianGrid:function(){!function(t,e,a,n,o,i,s,r,l,c){t.font="30px Arial",t.fillStyle="black",t.textAlign="left",t.textBaseline="top";var u=ne(o,i,l),d={lat:u.north,lng:u.west},m=ne(s,i,l),h={lat:m.north,lng:m.east},p=ne(s,r,l),v={lat:p.south,lng:p.east},g=ne(o,r,l),f={lat:g.south,lng:g.west};console.log(d,h,v,f);var _=j.WGS84ToCGCS2000(d,"6"),w=j.WGS84ToCGCS2000(h,"6"),y=j.WGS84ToCGCS2000(v,"6"),b=j.WGS84ToCGCS2000(f,"6");console.log(_,w,y,b);var x=oe(_.y,b.y),S=oe(w.y,y.y);if(S.length>0&&x.length>0){var C=Math.abs(_.y-b.y),L=Math.abs(w.y-y.y),k=Math.min(_.y,b.y),T=Math.min(w.y,y.y),M=a/C,D=a/L,$=!0,I=!1,P=void 0;try{for(var F,U=Zt()(x);!($=(F=U.next()).done);$=!0){var R=F.value,E=!0,A=!1,z=void 0;try{for(var B,G=Zt()(S);!(E=(B=G.next()).done);E=!0){var N=B.value;if(R===N){var O=(R-k)*M,V=(N-T)*D,W=[0+n,a-Math.round(O)],H=[e+n,a-Math.round(V)];t.beginPath(),t.moveTo(W[0],W[1]),t.lineTo(H[0],H[1]),t.stroke(),c&&(t.textAlign="left",t.fillText(""+R,W[0],W[1]),t.textAlign="right",t.fillText(""+N,H[0],H[1]))}}}catch(t){A=!0,z=t}finally{try{!E&&G.return&&G.return()}finally{if(A)throw z}}}}catch(t){I=!0,P=t}finally{try{!$&&U.return&&U.return()}finally{if(I)throw P}}}var Y=oe(_.x,w.x),q=oe(y.x,b.x);if(Y.length>0&&q.length>0){var X=Math.abs(_.x-w.x),Q=Math.abs(y.x-b.x),J=Math.min(_.x,w.x),Z=Math.min(y.x,b.x),K=e/X,tt=e/Q,et=!0,at=!1,nt=void 0;try{for(var ot,it=Zt()(Y);!(et=(ot=it.next()).done);et=!0){var st=ot.value,rt=!0,lt=!1,ct=void 0;try{for(var ut,dt=Zt()(q);!(rt=(ut=dt.next()).done);rt=!0){var mt=ut.value;if(st===mt){var ht=(st-J)*K,pt=(mt-Z)*tt,vt=[Math.round(ht),0+n],gt=[Math.round(pt),a+n];t.beginPath(),t.moveTo(vt[0],vt[1]),t.lineTo(gt[0],gt[1]),t.stroke(),c&&(t.textAlign="center",t.textBaseline="bottom",t.fillText(""+st,vt[0],vt[1]),t.textBaseline="top",t.fillText(""+mt,gt[0],gt[1]))}}}catch(t){lt=!0,ct=t}finally{try{!rt&&dt.return&&dt.return()}finally{if(lt)throw ct}}}}catch(t){at=!0,nt=t}finally{try{!et&&it.return&&it.return()}finally{if(at)throw nt}}}}(this.ctx,this.img.width,this.img.height,this.imagePadding,this.minX,this.minY,this.maxX,this.maxY,this.zoom,this.addTextEnabled)},drawLatitudeLongitudeGrid:function(){for(var t=this.canvas.height/10,e=this.canvas.width/10,a=0;a<=this.canvas.height;a+=t)this.ctx.beginPath(),this.ctx.moveTo(0,a),this.ctx.lineTo(this.canvas.width,a),this.ctx.stroke();for(var n=0;n<=this.canvas.width;n+=e)this.ctx.beginPath(),this.ctx.moveTo(n,0),this.ctx.lineTo(n,this.canvas.height),this.ctx.stroke()},saveImage:function(){if(this.canvas){var t=this.$loading({lock:!0,text:"å¤„ç†ä¸­...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.canvas.toBlob(function(e){var a=document.createElement("a");a.href=URL.createObjectURL(e),a.download="canvas.png",a.click(),t.close()},"image/png",.5)}},zoomIn:function(){this.zoomf(1.1)},zoomOut:function(){this.zoomf(.9)},zoomf:function(t){this.scale*=t,this.scale=Math.min(Math.max(.5,this.scale),3),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(this.scale,this.scale),this.drawImage()}},watch:{gridType:function(){this.drawImage()},gridColor:function(){this.drawImage()},gridLineWidth:function(){this.drawImage()},addTextEnabled:function(){this.drawImage()}},mounted:function(){this.initCanvas()}},se={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-editor"},[a("h1",{staticClass:"editor-header"},[t._v("\n    å›¾ç‰‡å åŠ å±‚ç¼–è¾‘\n  ")]),t._v(" "),a("div",{staticClass:"toolbar"},[a("span",[t._v("å›¾ç‰‡ä¿¡æ¯ï¼š")]),t._v(" "+t._s("zoomï¼š"+this.zoom+" coordï¼š"+this.maxX+"-"+this.maxY+"-"+this.minX+"-"+this.minY)+"\n    "),a("span",[t._v("å åŠ å±‚:")]),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"ç½‘æ ¼ç±»å‹"},model:{value:t.gridType,callback:function(e){t.gridType=e},expression:"gridType"}},[a("el-option",{attrs:{label:"ä¸å åŠ ",value:"none"}}),t._v(" "),a("el-option",{attrs:{label:"é«˜æ–¯ç½‘æ ¼-å…­åº¦",value:"gaussian"}})],1),t._v(" "),"none"!==t.gridType?a("span",[t._v("ç½‘æ ¼æ˜¾ç¤º:")]):t._e(),t._v(" "),"none"!==t.gridType?a("el-color-picker",{staticStyle:{"margin-left":"10px"},attrs:{"show-alpha":""},model:{value:t.gridColor,callback:function(e){t.gridColor=e},expression:"gridColor"}}):t._e(),t._v(" "),"none"!==t.gridType?a("span",[t._v("ç½‘æ ¼ç²—ç»†:")]):t._e(),t._v(" "),"none"!==t.gridType?a("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{type:"number",placeholder:"ç½‘æ ¼ç²—ç»†",min:1},model:{value:t.gridLineWidth,callback:function(e){t.gridLineWidth=t._n(e)},expression:"gridLineWidth"}}):t._e(),t._v(" "),"none"!==t.gridType?a("span",[t._v("æ·»åŠ åæ ‡å€¼:")]):t._e(),t._v(" "),"none"!==t.gridType?a("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"active-text":"æ˜¯","inactive-text":"å¦"},model:{value:t.addTextEnabled,callback:function(e){t.addTextEnabled=e},expression:"addTextEnabled"}}):t._e(),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-download"},on:{click:t.saveImage}},[t._v("ä¿å­˜å›¾ç‰‡")])],1),t._v(" "),a("div",{ref:"imageContainer",staticClass:"image-container"},[a("canvas",{ref:"canvas"})])])},staticRenderFns:[]};var re=a("VU/8")(ie,se,!1,function(t){a("QENn")},"data-v-792b5d5a",null).exports;n.default.use(s.a);var le=new s.a({routes:[{path:"/map",name:"map",component:qt,meta:{requiresAuth:!0}},{path:"/",component:f,name:"index",meta:{requiresAuth:!1}},{path:"/login",name:"login",component:f,meta:{requiresAuth:!1}},{path:"/regist",name:"regist",component:y,meta:{requiresAuth:!1}},{path:"/edit",name:"edit",component:re,props:!0,meta:{requiresAuth:!1}}]});le.beforeEach(function(t,e,a){var n=!!Qt.state.user;t.meta.requiresAuth&&!n?(u.Message.error("è¯·å…ˆç™»é™†..."),a("/login")):a()});var ce=le;a("tvR6"),a("EYnv"),a("muQq");n.default.config.productionTip=!1,n.default.use(d.a),new n.default({el:"#app",router:ce,store:Qt,components:{App:i},template:"<App/>"})},QENn:function(t,e){},QyuO:function(t,e){},Tnnd:function(t,e){},"Ugd/":function(t,e,a){t.exports=a.p+"static/img/txz-logo.078998d.png"},"W+m7":function(t,e){},ZSwC:function(t,e){},aPsZ:function(t,e,a){t.exports=a.p+"static/img/step4.157bfb5.png"},bYgV:function(t,e){},enV7:function(t,e){},fj6b:function(t,e){},j3gX:function(t,e,a){t.exports=a.p+"static/img/step1.61d4219.png"},jYkd:function(t,e){},ja2c:function(t,e,a){t.exports=a.p+"static/img/wechat.4214036.jpeg"},lkQp:function(t,e){},muQq:function(t,e){},tvR6:function(t,e){},wb7n:function(t,e,a){t.exports=a.p+"static/img/step3.4acd97a.png"}},["NHnr"]);
//# sourceMappingURL=app.3cb05948327cffbbecdf.js.map